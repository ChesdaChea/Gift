<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gift-Selection</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Page 1 -->
  <div class="container" id="page1">
    <h1 class="div1" style="text-align: center; color: white;" >Please Select 3 Gifts</h1>
    <div class="div2" style="display: flex; justify-content: center;">
      <div class="grid">
        <img src="/img/gift-removebg-preview.png">
        <img src="/img/gift-removebg-preview.png">
        <img src="/img/gift-removebg-preview.png">
        <img src="/img/gift-removebg-preview.png">
        <img src="/img/gift-removebg-preview.png">
        <img src="/img/gift-removebg-preview.png">
      </div>
    </div>
   
    <button id="submitBtn" disabled>Submit</button>
  </div>

  <!-- Page 2 -->
  <div class="inform" style="display:none;" id="page2">
    <h1 class="head1" style="text-align: center; color: white;">How To Play</h1>
    <h2 class="head2" style="text-align: center; color: white;">Submit the form below<br>Tap open the mystery box & stand a chance to <span>WIN BIG!</span></h2>
    <div class="input" style="display: flex; justify-content: center;">
      <input class="input1" type="text" placeholder="NAME" autocomplete="off">
      <input class="input2" type="text" placeholder="PHONE" autocomplete="off">
      <input class="input3" type="text" placeholder="EMAIL" autocomplete="off">
    </div>
    <button id="endBtn" disabled>Submit</button>
  </div>

<script>
window.onload = function() {
  // 🎁 Gift list
  const gifts = [
    { src: "/img/tryagain.png", weight: 100 },
    { src: "/img/ten per.png", weight: 85 },
    { src: "/img/twenty-five per.png", weight: 85 },
    { src: "/img/fifty per.png", weight: 70 },
    { src: "/img/seventy-five per.png", weight: 70 },
    { src: "/img/iphone.png", weight: 25 },
    { src: "/img/ipad.png", weight: 10 },
    { src: "/img/macbook.png", weight: 3 },
    { src: "/img/adv.png", weight: 2 },
    { src: "/img/mercedes.png", weight: 1 },
  ];

  function weightedRandom(items) {
    const totalWeight = items.reduce((sum, item) => sum + item.weight, 0);
    let random = Math.random() * totalWeight;
    for (let item of items) {
      if (random < item.weight) return item;
      random -= item.weight;
    }
  }

  let totalClicks = 0;
  const maxClicks = 3;

  const gridImages = document.querySelectorAll(".grid img");
  const submitBtn = document.getElementById("submitBtn");
  const endBtn = document.getElementById("endBtn");
  const inputs = document.querySelectorAll("#page2 input");

  // 🔄 Reset game
  function resetGame() {
    totalClicks = 0;
    submitBtn.disabled = true;
    endBtn.disabled = true;

    inputs.forEach(input => input.value = "");

    gridImages.forEach(img => {
      img.src = "/img/gift-removebg-preview.png";
      img.style.pointerEvents = "auto";
      img.style.opacity = "1";
      img.style.cursor = "pointer";
    });

    attachImageEvents();
  }

  // 🎯 Attach click events
  function attachImageEvents() {
    gridImages.forEach(img => {
      img.onclick = function() {
        if (totalClicks >= maxClicks) return;

        const randomGift = weightedRandom(gifts);
        img.src = randomGift.src;

        totalClicks++;
        img.onclick = null;
        img.style.cursor = "default";

        if (totalClicks >= maxClicks) {
          gridImages.forEach(el => el.style.pointerEvents = "none");
          submitBtn.disabled = false;
        }
      };
    });
  }

  attachImageEvents();

  // 📝 Submit button
  submitBtn.addEventListener("click", () => {
    document.getElementById("page1").style.display = "none";
    document.getElementById("page2").style.display = "block";
    alert("Please fill your information before submit");
  });

  // ✅ Check inputs
  function checkInputs() {
    let allFilled = [...inputs].every(input => input.value.trim() !== "");
    endBtn.disabled = !allFilled;
  }
  inputs.forEach(input => input.addEventListener("input", checkInputs));

  // ✅ End button
  endBtn.addEventListener("click", () => {
    alert("Thanks For Your Participation 🎉");
    document.getElementById("page1").style.display = "block";
    document.getElementById("page2").style.display = "none";
    resetGame();
  });
};
</script>
</body>
</html>
